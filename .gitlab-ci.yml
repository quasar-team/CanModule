# CI/CD for CanModule: trigger the qa and generate the documentation
# we do not build any libs or binaries, since this is cross platform anyway 
# and we distribute the sources only
#
stages:
  - ics-fd-qa
  - documentation
 
# include QA 
include:
  - remote: 'https://gitlab.cern.ch/mludwig/ics-fd-qa/raw/master/.ics-fd-qa-template.yml' 

# create a sphinx/doxygen/breathe documentation on the specific code
# use sphinx-docker image ubuntu
# not yet integrated into qa (branch doc)
documentation:
   stage: documentation
   image: $CI_REGISTRY/jcopfw/qa/ics-fd-qa:ubuntu2004
   tags:
     - docker
   script:
     - cd $CI_PROJECT_DIR/Documentation && ./documentation.sh
 
   artifacts:
     name: documentation
     paths:
       - "$CI_PROJECT_DIR/Documentation/html/"
       - "$CI_PROJECT_DIR/Documentation/pdf/"
       - "$CI_PROJECT_DIR/Documentation/latex/"
       - "$CI_PROJECT_DIR/Documentation/doxygen-html/"
  

