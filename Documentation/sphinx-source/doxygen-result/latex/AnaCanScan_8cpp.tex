\hypertarget{AnaCanScan_8cpp}{}\doxysection{Can\+Interface\+Implementations/anagate/\+Ana\+Can\+Scan.cpp File Reference}
\label{AnaCanScan_8cpp}\index{CanInterfaceImplementations/anagate/AnaCanScan.cpp@{CanInterfaceImplementations/anagate/AnaCanScan.cpp}}
{\ttfamily \#include \char`\"{}Ana\+Can\+Scan.\+h\char`\"{}}\newline
{\ttfamily \#include $<$time.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$map$>$}\newline
{\ttfamily \#include $<$Log\+It.\+h$>$}\newline
{\ttfamily \#include $<$sstream$>$}\newline
{\ttfamily \#include $<$iostream$>$}\newline
{\ttfamily \#include $<$boost/thread/thread.\+hpp$>$}\newline
{\ttfamily \#include \char`\"{}Can\+Module\+Utils.\+h\char`\"{}}\newline
{\ttfamily \#include $<$sys/time.\+h$>$}\newline
Include dependency graph for Ana\+Can\+Scan.\+cpp\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{AnaCanScan_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{AnaCanScan_8cpp_a07e042970e18b919d409eb09524d625c}{D\+L\+L\+E\+X\+P\+O\+R\+T\+F\+L\+AG}}
\item 
\#define \mbox{\hyperlink{AnaCanScan_8cpp_a9aa60e1ead64be77ad551e745cbfd4d3}{W\+I\+N\+A\+PI}}
\item 
\#define \mbox{\hyperlink{AnaCanScan_8cpp_ac34d62b5ffd4e8e1c3ece118f3f58485}{M\+L\+O\+G\+A\+NA}}(L\+E\+V\+EL,  T\+H\+IS)~L\+OG(Log\+::\+L\+E\+V\+EL, \mbox{\hyperlink{classAnaCanScan_a39ab4f1c865bef7349992abd4d91da1d}{Ana\+Can\+Scan\+::st\+\_\+log\+It\+Handle\+Anagate}}) $<$$<$ \+\_\+\+\_\+\+F\+U\+N\+C\+T\+I\+O\+N\+\_\+\+\_\+ $<$$<$ \char`\"{} \char`\"{} $<$$<$ \char`\"{} anagate bus= \char`\"{} $<$$<$ T\+H\+IS-\/$>$get\+Bus\+Name() $<$$<$ \char`\"{} \char`\"{}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{MockCanAccess_8cpp_a07e042970e18b919d409eb09524d625c}{D\+L\+L\+E\+X\+P\+O\+R\+T\+F\+L\+AG}} \mbox{\hyperlink{classCanModule_1_1CCanAccess}{C\+Can\+Access}} $\ast$ \mbox{\hyperlink{AnaCanScan_8cpp_ae930092b65c48c86b99b5da2178b4692}{get\+Can\+Bus\+Access}} ()
\item 
void \mbox{\hyperlink{STCanScan_8cpp_a9aa60e1ead64be77ad551e745cbfd4d3}{W\+I\+N\+A\+PI}} \mbox{\hyperlink{AnaCanScan_8cpp_ad5698349874e3653b879b5de27311594}{Internal\+Callback}} (Ana\+U\+Int32 n\+Identifier, const char $\ast$pc\+Buffer, Ana\+Int32 n\+Buffer\+Len, Ana\+Int32 n\+Flags, Ana\+Int32 h\+Handle, Ana\+Int32 n\+Seconds, Ana\+Int32 n\+Microseconds)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
boost\+::mutex \mbox{\hyperlink{AnaCanScan_8cpp_a123d03be0edb10af2357fadbbcc7d1e0}{anagate\+Reconnect\+Mutex}}
\item 
std\+::map$<$ Ana\+Int32, \mbox{\hyperlink{classAnaCanScan}{Ana\+Can\+Scan}} $\ast$ $>$ \mbox{\hyperlink{AnaCanScan_8cpp_a348494361939b368693ef24a71f3d9bc}{g\+\_\+\+Ana\+Can\+Scan\+Object\+Map}}
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{AnaCanScan_8cpp_a07e042970e18b919d409eb09524d625c}\label{AnaCanScan_8cpp_a07e042970e18b919d409eb09524d625c}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!DLLEXPORTFLAG@{DLLEXPORTFLAG}}
\index{DLLEXPORTFLAG@{DLLEXPORTFLAG}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{DLLEXPORTFLAG}{DLLEXPORTFLAG}}
{\footnotesize\ttfamily \#define D\+L\+L\+E\+X\+P\+O\+R\+T\+F\+L\+AG}

Â© Copyright C\+E\+RN, 2015. All rights not expressly granted are reserved.

\mbox{\hyperlink{AnaCanScan_8cpp}{Ana\+Can\+Scan.\+cpp}}

Created on\+: Mar 17, 2015 Author\+: pnikiel, vfilimon, quasar team Maintainer\+: mludwig at cern dot ch

This file is part of Quasar.

Quasar is free software\+: you can redistribute it and/or modify it under the terms of the G\+NU Lesser General Public Licence as published by the Free Software Foundation, either version 3 of the Licence.

Quasar is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+UT A\+NY W\+A\+R\+R\+A\+N\+TY; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+TY or F\+I\+T\+N\+E\+SS F\+OR A P\+A\+R\+T\+I\+C\+U\+L\+AR P\+U\+R\+P\+O\+SE. See the G\+NU Lesser General Public Licence for more details.

You should have received a copy of the G\+NU Lesser General Public License along with Quasar. If not, see \href{http://www.gnu.org/licenses/}{\texttt{ http\+://www.\+gnu.\+org/licenses/}}.

Here the Anagate ethernet-\/\+C\+AN bridges are implemented 

Definition at line 47 of file Ana\+Can\+Scan.\+cpp.

\mbox{\Hypertarget{AnaCanScan_8cpp_ac34d62b5ffd4e8e1c3ece118f3f58485}\label{AnaCanScan_8cpp_ac34d62b5ffd4e8e1c3ece118f3f58485}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!MLOGANA@{MLOGANA}}
\index{MLOGANA@{MLOGANA}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{MLOGANA}{MLOGANA}}
{\footnotesize\ttfamily \#define M\+L\+O\+G\+A\+NA(\begin{DoxyParamCaption}\item[{}]{L\+E\+V\+EL,  }\item[{}]{T\+H\+IS }\end{DoxyParamCaption})~L\+OG(Log\+::\+L\+E\+V\+EL, \mbox{\hyperlink{classAnaCanScan_a39ab4f1c865bef7349992abd4d91da1d}{Ana\+Can\+Scan\+::st\+\_\+log\+It\+Handle\+Anagate}}) $<$$<$ \+\_\+\+\_\+\+F\+U\+N\+C\+T\+I\+O\+N\+\_\+\+\_\+ $<$$<$ \char`\"{} \char`\"{} $<$$<$ \char`\"{} anagate bus= \char`\"{} $<$$<$ T\+H\+IS-\/$>$get\+Bus\+Name() $<$$<$ \char`\"{} \char`\"{}}



Definition at line 72 of file Ana\+Can\+Scan.\+cpp.

\mbox{\Hypertarget{AnaCanScan_8cpp_a9aa60e1ead64be77ad551e745cbfd4d3}\label{AnaCanScan_8cpp_a9aa60e1ead64be77ad551e745cbfd4d3}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!WINAPI@{WINAPI}}
\index{WINAPI@{WINAPI}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{WINAPI}{WINAPI}}
{\footnotesize\ttfamily \#define W\+I\+N\+A\+PI}



Definition at line 48 of file Ana\+Can\+Scan.\+cpp.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{AnaCanScan_8cpp_ae930092b65c48c86b99b5da2178b4692}\label{AnaCanScan_8cpp_ae930092b65c48c86b99b5da2178b4692}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!getCanBusAccess@{getCanBusAccess}}
\index{getCanBusAccess@{getCanBusAccess}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{getCanBusAccess()}{getCanBusAccess()}}
{\footnotesize\ttfamily \mbox{\hyperlink{MockCanAccess_8cpp_a07e042970e18b919d409eb09524d625c}{D\+L\+L\+E\+X\+P\+O\+R\+T\+F\+L\+AG}} \mbox{\hyperlink{classCanModule_1_1CCanAccess}{C\+Can\+Access}}$\ast$ get\+Can\+Bus\+Access (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

creates and returns anagate can access object 

Definition at line 143 of file Ana\+Can\+Scan.\+cpp.

\mbox{\Hypertarget{AnaCanScan_8cpp_ad5698349874e3653b879b5de27311594}\label{AnaCanScan_8cpp_ad5698349874e3653b879b5de27311594}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!InternalCallback@{InternalCallback}}
\index{InternalCallback@{InternalCallback}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{InternalCallback()}{InternalCallback()}}
{\footnotesize\ttfamily void \mbox{\hyperlink{STCanScan_8cpp_a9aa60e1ead64be77ad551e745cbfd4d3}{W\+I\+N\+A\+PI}} Internal\+Callback (\begin{DoxyParamCaption}\item[{Ana\+U\+Int32}]{n\+Identifier,  }\item[{const char $\ast$}]{pc\+Buffer,  }\item[{Ana\+Int32}]{n\+Buffer\+Len,  }\item[{Ana\+Int32}]{n\+Flags,  }\item[{Ana\+Int32}]{h\+Handle,  }\item[{Ana\+Int32}]{n\+Seconds,  }\item[{Ana\+Int32}]{n\+Microseconds }\end{DoxyParamCaption})}

call back to catch incoming C\+AN messages for reading. It is called on a handle, which is internally registered and managed by the anagate A\+PI. If that handle changes, the callback has to be unregistered before I guess. 

Definition at line 154 of file Ana\+Can\+Scan.\+cpp.



References Can\+Msg\+Struct\+::c\+\_\+data, Can\+Msg\+Struct\+::c\+\_\+dlc, Can\+Msg\+Struct\+::c\+\_\+ff, Can\+Msg\+Struct\+::c\+\_\+id, Can\+Msg\+Struct\+::c\+\_\+time, Ana\+Can\+Scan\+::can\+Message\+To\+String(), Can\+Module\+::convert\+Timepoint\+To\+Timeval(), Can\+Module\+::current\+Time\+Timeval(), and g\+\_\+\+Ana\+Can\+Scan\+Object\+Map.



Referenced by Ana\+Can\+Scan\+::connect\+Reception\+Handler(), and Ana\+Can\+Scan\+::open\+Can\+Port().

Here is the call graph for this function\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{AnaCanScan_8cpp_ad5698349874e3653b879b5de27311594_cgraph}
\end{center}
\end{figure}


\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{AnaCanScan_8cpp_a123d03be0edb10af2357fadbbcc7d1e0}\label{AnaCanScan_8cpp_a123d03be0edb10af2357fadbbcc7d1e0}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!anagateReconnectMutex@{anagateReconnectMutex}}
\index{anagateReconnectMutex@{anagateReconnectMutex}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{anagateReconnectMutex}{anagateReconnectMutex}}
{\footnotesize\ttfamily boost\+::mutex anagate\+Reconnect\+Mutex}



Definition at line 56 of file Ana\+Can\+Scan.\+cpp.



Referenced by Ana\+Can\+Scan\+::reconnect\+All\+Ports().

\mbox{\Hypertarget{AnaCanScan_8cpp_a348494361939b368693ef24a71f3d9bc}\label{AnaCanScan_8cpp_a348494361939b368693ef24a71f3d9bc}} 
\index{AnaCanScan.cpp@{AnaCanScan.cpp}!g\_AnaCanScanObjectMap@{g\_AnaCanScanObjectMap}}
\index{g\_AnaCanScanObjectMap@{g\_AnaCanScanObjectMap}!AnaCanScan.cpp@{AnaCanScan.cpp}}
\doxysubsubsection{\texorpdfstring{g\_AnaCanScanObjectMap}{g\_AnaCanScanObjectMap}}
{\footnotesize\ttfamily std\+::map$<$Ana\+Int32, \mbox{\hyperlink{classAnaCanScan}{Ana\+Can\+Scan}}$\ast$$>$ g\+\_\+\+Ana\+Can\+Scan\+Object\+Map}

global map of connection-\/objects\+: the map-\/key is the handle. Since handles are allocated by the OS the keys are getting changed as well when we reconnect, so that we do not keep the stale keys(=handles) in the map at all. The map is used in the (static) Internal\+Callback code straightforward and speedy, because we can get to the object by just looking up the map using the key(=the handle). The map manipulations are protected by serialization of reconnects with the anagate\+Reconnect\+Mutex. At RO access in the callbacks the map is N\+OT protected because we do not want to serialize the callbacks and because it is a RO map access, which is \char`\"{}like atomic\char`\"{}. Well -\/ it does work in multithreads.. ;-\/) 

Definition at line 70 of file Ana\+Can\+Scan.\+cpp.



Referenced by Ana\+Can\+Scan\+::connect\+Reception\+Handler(), Ana\+Can\+Scan\+::erase\+Reception\+Handler\+From\+Map(), Internal\+Callback(), Ana\+Can\+Scan\+::open\+Can\+Port(), Ana\+Can\+Scan\+::reconnect\+All\+Ports(), Ana\+Can\+Scan\+::reconnect\+This\+Port(), and Ana\+Can\+Scan\+::show\+Ana\+Can\+Scan\+Object\+Map().

