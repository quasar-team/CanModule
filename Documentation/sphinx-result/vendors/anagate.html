
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>AnaGate &#8212; CanModule 1.1.0pre documentation</title>
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Peak" href="peak.html" />
    <link rel="prev" title="SysTec" href="systec.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="peak.html" title="Peak"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="systec.html" title="SysTec"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CanModule 1.1.0pre documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="anagate">
<h1><a class="reference internal" href="#anagate">AnaGate</a><a class="headerlink" href="#anagate" title="Permalink to this headline">¶</a></h1>
<p>All modules from vendor <a class="reference internal" href="#anagate">AnaGate</a> are handled by class AnaCanScan which manages the modules through their underlying vendor specific API and provides
the standard generic CanModule API. Since these modules communicate to the host computer only via ethernet, at the fundamental level only classical
tcp/ip ethernet is needed. Nevertheless the specific contents of the IP frames are wrapped up in an Anagate API for convenience, which is linked
into the user code as a library. There are therefore no implementation differences between Linux and Windows.
Here the underlying vendor specific classes and the specific parameters are documented.</p>
<div class="section" id="the-connection">
<h2>The connection<a class="headerlink" href="#the-connection" title="Permalink to this headline">¶</a></h2>
<p>To connect to a specific port for I/O, and send CAN messages, the following methods are used.</p>
<dl class="class">
<dt id="_CPPv410AnaCanScan">
<span id="_CPPv310AnaCanScan"></span><span id="_CPPv210AnaCanScan"></span><span id="AnaCanScan"></span><span class="target" id="classAnaCanScan"></span><em class="property">class </em><code class="descname">AnaCanScan</code> : <em class="property">public</em> CanModule::<a class="reference internal" href="../standardApi.html#_CPPv4N9CanModule10CCanAccessE" title="CanModule::CCanAccess">CCanAccess</a><a class="headerlink" href="#_CPPv410AnaCanScan" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric">Public Functions</p>
<dl class="function">
<dt id="_CPPv4N10AnaCanScan9createBusEK6stringK6string">
<span id="_CPPv3N10AnaCanScan9createBusEK6stringK6string"></span><span id="_CPPv2N10AnaCanScan9createBusEK6stringK6string"></span><span id="AnaCanScan::createBus__stringC.stringC"></span><span class="target" id="classAnaCanScan_1a54a66154c956b4605ff18f93f552db60"></span>bool <code class="descname">createBus</code><span class="sig-paren">(</span><em class="property">const</em> string <em>name</em>, <em class="property">const</em> string <em>parameters</em><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N10AnaCanScan9createBusEK6stringK6string" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Method that initialises a CAN bus channel for anagate. All following methods called on the same object will be using this initialized channel.</p>
<p><dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>was the initialisation process successful? </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">name</span></code>: 3 parameters separated by “:” like “n0:n1:n2” n0 = “an” for anagate n1 = port number on the module, 0=A, 1=B, etc etc n2 = ip number ex.: “an:can1:137.138.12.99” speaks to port B (=1) on anagate module at the ip ex.: “an:1:137.138.12.99” works as well</li>
<li><code class="docutils literal notranslate"><span class="pre">parameters</span></code>: up to 6 parameters separated by whitespaces : “p0 p1 p2 p3 p4 p5” in THAT order, positive integers<ul>
<li>”Unspecified” (or empty): using defaults = “125000 0 0 0 0 0” // all params missing</li>
<li>p0: bitrate: 10000, 20000, 50000, 62000, 100000, 125000, 250000, 500000, 800000, 1000000 bit/s</li>
<li>p1: operatingMode: 0=default mode, values 1 (loop back) and 2 (listen) are not supported by CanModule</li>
<li>p2: termination: 0=not terminated (default), 1=terminated (120 Ohm for CAN bus)</li>
<li>p3: highSpeed: 0=deactivated (default), 1=activated. If activated, confirmation and filtering of CAN traffic are switched off</li>
<li>p4: TimeStamp: 0=deactivated (default), 1=activated. If activated, a timestamp is added to the CAN frame. Not all modules support this.</li>
<li>p5: syncMode: 0=default, unused but reserved for future use i.e. “250000 0 1 0 0 1” (see anagate manual for more details)</li>
</ul>
</li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

<dl class="function">
<dt id="_CPPv4N10AnaCanScan11sendMessageEshPhb">
<span id="_CPPv3N10AnaCanScan11sendMessageEshPhb"></span><span id="_CPPv2N10AnaCanScan11sendMessageEshPhb"></span><span id="AnaCanScan::sendMessage__short.unsigned-c.unsigned-cP.b"></span><span class="target" id="classAnaCanScan_1ad45666454318c891d7acd9fe16ae4c49"></span>bool <code class="descname">sendMessage</code><span class="sig-paren">(</span>short <em>cobID</em>, unsigned char <em>len</em>, unsigned char *<em>message</em>, bool <em>rtr</em> = false<span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N10AnaCanScan11sendMessageEshPhb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>send a CAN message frame (8 byte) for anagate Method that sends a message through the can bus channel. If the method createBus was not called before this, sendMessage will fail, as there is no can bus channel to send a message trough. <dl class="docutils">
<dt><strong>Return</strong></dt>
<dd>Was the sending process successful? </dd>
<dt><strong>Parameters</strong></dt>
<dd><ul class="breatheparameterlist first last simple">
<li><code class="docutils literal notranslate"><span class="pre">cobID</span><span class="pre">:</span></code>: Identifier that will be used for the message. </li>
<li><code class="docutils literal notranslate"><span class="pre">len</span><span class="pre">:</span></code>: Length of the message. If the message is bigger than 8 characters, it will be split into separate 8 characters messages. </li>
<li><code class="docutils literal notranslate"><span class="pre">message</span><span class="pre">:</span></code>: Message to be sent trough the can bus. </li>
<li><code class="docutils literal notranslate"><span class="pre">rtr</span><span class="pre">:</span></code>: is the message a remote transmission request? </li>
</ul>
</dd>
</dl>
</p>
</dd></dl>

</div>
</dd></dl>

</div>
<div class="section" id="standard-canmodule-api-example">
<h2>standard CanModule API example<a class="headerlink" href="#standard-canmodule-api-example" title="Permalink to this headline">¶</a></h2>
<p>This is how the CanModule standard API is used for anagate. The code is identical for linux and windows.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">libloader</span> <span class="o">=</span> <span class="n">CanModule</span><span class="o">::</span><span class="n">CanLibLoader</span><span class="o">::</span><span class="n">createInstance</span><span class="p">(</span> <span class="s">&quot;an&quot;</span> <span class="p">);</span>
<span class="n">cca</span> <span class="o">=</span> <span class="n">libloader</span><span class="o">-&gt;</span><span class="n">openCanBus</span><span class="p">(</span> <span class="s">&quot;an:can0&quot;</span><span class="p">,</span> <span class="s">&quot;250000 0 1&quot;</span> <span class="p">);</span> <span class="c1">// termination, ISEG controllers, p3, p4, p5 defaults</span>
<span class="n">CanMessage</span> <span class="n">cm</span><span class="p">;</span> <span class="c1">// empty</span>
<span class="n">cca</span><span class="o">-&gt;</span><span class="n">sendMessage</span><span class="p">(</span> <span class="o">&amp;</span><span class="n">cm</span> <span class="p">);</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../downloading.html">Downloading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../objective.html">Objective</a></li>
<li class="toctree-l1"><a class="reference internal" href="../standardApi.html">Standard API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cwrapper.html">C-Wrapper</a></li>
<li class="toctree-l1"><a class="reference internal" href="systec.html">SysTec</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">AnaGate</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-connection">The connection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#standard-canmodule-api-example">standard CanModule API example</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="peak.html">Peak</a></li>
<li class="toctree-l1"><a class="reference internal" href="../building.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running.html">Example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Example</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/vendors/anagate.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="peak.html" title="Peak"
             >next</a> |</li>
        <li class="right" >
          <a href="systec.html" title="SysTec"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">CanModule 1.1.0pre documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, CERN, BE-ICS (Michael Ludwig).
      Last updated on 20-May-2019 17:27:58.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>