
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>SysTec</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/haiku.css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="next" title="AnaGate" href="anagate.html" />
    <link rel="prev" title="Details on classes" href="../classestracing.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>CanModule 2.0.16 documentation</span></a></h1>
        <h2 class="heading"><span>SysTec</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="../classestracing.html">Details on classes</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="anagate.html">AnaGate</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="systec">
<h1><a class="reference internal" href="#systec">SysTec</a></h1>
<p>All modules from vendor <a class="reference internal" href="#systec">SysTec</a> are handled by class STCanScan (windows) or CSockCanScan (linux) which
manage the modules through their underlying vendor specific API and provide the standard generic CanModule API.
Here the underlying vendor specific classes and the specific parameters are documented.</p>
<p>SysTec modules USB-CAN bridges are supported: sysWORXX 1,2,8,16</p>
<section id="status">
<h2>status</h2>
<p>status information is propagated through the unified status.
For windows:</p>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv49STCanScan">
<span id="_CPPv39STCanScan"></span><span id="_CPPv29STCanScan"></span><span id="STCanScan"></span><span class="target" id="classSTCanScan"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">STCanScan</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">CanModule</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="../canports.html#_CPPv4N9CanModule10CCanAccessE" title="CanModule::CCanAccess"><span class="n"><span class="pre">CCanAccess</span></span></a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N9STCanScan13getPortStatusEv">
<span id="_CPPv3N9STCanScan13getPortStatusEv"></span><span id="_CPPv2N9STCanScan13getPortStatusEv"></span><span id="STCanScan::getPortStatus"></span><span class="target" id="classSTCanScan_1a27eabd471d3bb8154dfadb677c66e1d5"></span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">getPortStatus</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><br /></dt>
<dd><p>get CAN port and USB status, code it into an int &gt; 200 (for windows&#64;systec). use the API directly table19 says for CAN status: 0x0: no error 0x1: tx overrun 0x2: rx overrun 0x4: error limit1 exceeded: warning limit 0x8: error limit2 exceeded: error passive 0x10: can controller is off 0x40: rx buffer overrun 0x80: tx buffer overrun 0x400: transmit timeout, message dropped</p>
<p>table20 says for USB status: 0x2000: module/usb got reset because of polling failure per second 0x4000: module/usb got reset because watchdog was not triggered </p>
</dd></dl>

</div>
</dd></dl>

<p>for linux:</p>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv412CSockCanScan">
<span id="_CPPv312CSockCanScan"></span><span id="_CPPv212CSockCanScan"></span><span id="CSockCanScan"></span><span class="target" id="classCSockCanScan"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">CSockCanScan</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">CanModule</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="../canports.html#_CPPv4N9CanModule10CCanAccessE" title="CanModule::CCanAccess"><span class="n"><span class="pre">CCanAccess</span></span></a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N12CSockCanScan13getPortStatusEv">
<span id="_CPPv3N12CSockCanScan13getPortStatusEv"></span><span id="_CPPv2N12CSockCanScan13getPortStatusEv"></span><span id="CSockCanScan::getPortStatus"></span><span class="target" id="classCSockCanScan_1ad1caa327a98bc30012d2c5010a98cb05"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">virtual</span></span><span class="w"> </span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">getPortStatus</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><br /></dt>
<dd><p>return socketcan port status as-is, from can_netlink.h enum can_state { CAN_STATE_ERROR_ACTIVE = 0, RX/TX error count &lt; 96 CAN_STATE_ERROR_WARNING, RX/TX error count &lt; 128 CAN_STATE_ERROR_PASSIVE, RX/TX error count &lt; 256 CAN_STATE_BUS_OFF, RX/TX error count &gt;= 256 CAN_STATE_STOPPED, Device is stopped CAN_STATE_SLEEPING, Device is sleeping CAN_STATE_MAX }; </p>
</dd></dl>

</div>
</dd></dl>

</section>
<section id="errors">
<h2>errors</h2>
<p>Errors and problems are available through two mechanisms:</p>
<ul class="simple">
<li><p>LogIt. This reports runtime errors detected by CanModule:
set the LogIt trace level to TRC and grep for “systec”, for component “CanModule”</p></li>
</ul>
<p><strong>windows</strong>
* vendor and hardware specific errors are available through connection of</p>
<blockquote>
<div><p>an error handler (to a boost signal carrying the error message, see standard API).</p>
</div></blockquote>
<dl class="cpp class">
<dt class="sig sig-object cpp">
<span class="target" id="classSTCanScan"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">STCanScan</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">CanModule</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="../canports.html#_CPPv4N9CanModule10CCanAccessE" title="CanModule::CCanAccess"><span class="n"><span class="pre">CCanAccess</span></span></a><br /></dt>
<dd><div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-private-functions">Private Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N9STCanScan17STcanGetErrorTextEl">
<span id="_CPPv3N9STCanScan17STcanGetErrorTextEl"></span><span id="_CPPv2N9STCanScan17STcanGetErrorTextEl"></span><span id="STCanScan::STcanGetErrorText__l"></span><span class="target" id="classSTCanScan_1a794110572725db6b7c153104ee1330b3"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">STcanGetErrorText</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">errCode</span></span><span class="sig-paren">)</span><br /></dt>
<dd><p>error text specific to STcan according to table24 I am just copying the whole descriptions from the doc, verbatim, wtf. you get some shakespeare from it. </p>
</dd></dl>

</div>
</dd></dl>

<p><strong>linux</strong>
* the error message from the ioctl call is returned, unfortunately it is rather unspecific.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="../classestracing.html">Details on classes</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="anagate.html">AnaGate</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, CERN, quasar-team, BE-ICS (Michael Ludwig).
      Last updated on 04-Mar-2022 16:37:37.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>